<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>{{title}}</title>

    <link rel="apple-touch-icon" href="{{joinBase 'images/lbh3_rabbit_logo.png'}}">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="LBH3">

    <meta name="msapplication-TileColor" content="#d02d33">
    <meta name="msapplication-TileImage" content="{{joinBase 'images/lbh3_rabbit_logo.png'}}">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-91420608-1', 'auto');
      ga('send', 'pageview');
    </script>

  </head>
  <body>
    <can-import from="bootstrap/dist/css/bootstrap.css" />
    <can-import from="lbh3/styles.less" />
    <can-import from="lbh3/app" export-as="viewModel" />

    <header>
      <can-import from="lbh3/components/header.component">
        {{#if isPending}}
          Loading header…
        {{else}}
          <lbh3-header />
        {{/if}}
      </can-import>
      <can-import from="lbh3/components/nav.component">
        {{#if isPending}}
          Loading navigation…
        {{else}}
          <lbh3-nav {page}="page" {year}="year" />
        {{/if}}
      </can-import>
    </header>

    <main class="container {{page}}">
      {{#switch page}}
        {{#case "about"}}
          <can-import from="lbh3/components/about/">
            {{#if isPending}}
              Loading about page…
            {{else}}
              <lbh3-about {secondary-page}="secondaryPage" />
            {{/if}}
          </can-import>
        {{/case}}
        {{#case "admin"}}
          <can-import from="lbh3/components/admin/">
            {{#if isPending}}
              Loading admin page…
            {{else}}
              <lbh3-admin {secondary-page}="secondaryPage" />
            {{/if}}
          </can-import>
        {{/case}}
        {{#case "hareline"}}
          <can-import from="lbh3/components/hareline/">
            {{#if isPending}}
              Loading Hareline…
            {{else}}
              <lbh3-hareline />
            {{/if}}
          </can-import>
        {{/case}}
        {{#case "home"}}
          <can-import from="lbh3/components/home/">
            {{#if isPending}}
              Loading home page…
            {{else}}
              <lbh3-home />
            {{/if}}
          </can-import>
        {{/case}}
        {{#case "events"}}
          <can-import from="lbh3/components/past-runs/">
            {{#if isPending}}
              Loading Past Runs…
            {{else}}
              <lbh3-past-runs {year}="year" />
            {{/if}}
          </can-import>
        {{/case}}
      {{/switch}}
    </main>

    <can-import from="lbh3/components/footer.component">
      {{#if isPending}}
        Loading footer…
      {{else}}
        <lbh3-footer />
      {{/if}}
    </can-import>

    {{#switch env.NODE_ENV}}
      {{#case "production"}}
        <script src="{{joinBase 'steal.production.js'}}"></script>
      {{/case}}
      {{#default}}
        <script src="/node_modules/steal/steal.js"></script>
      {{/default}}
    {{/switch}}
  </body>
</html>
